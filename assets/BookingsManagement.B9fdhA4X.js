import{r as c,j as e,B as D,a as f,P,I as S,D as R,c as W,d as F,G as k,e as x,F as U,f as M,S as G,M as p,i as L,b as N,A as z}from"./index.BZ6bSIPx.js";import{A as H}from"./Add.DBOCiMT4.js";import{T as V,a as O,b as J,c as I,d as t,e as K}from"./TableRow.nWf7yhOX.js";import{E as Q,D as X}from"./Edit.B9_Pk3f1.js";import{S as Y}from"./Snackbar.DN_5azCV.js";const u=({children:a,...i})=>e.jsx(k,{item:!0,...i,children:a});function Z(a,i){if(a==="participants"){const n=parseInt(String(i),10);return Number.isFinite(n)&&n>0?n:1}return a==="status"?String(i):i}const y={tourId:"",userId:"",date:"",participants:1,status:"pending",specialRequests:""},re=()=>{const[a]=c.useState([]),[i,n]=c.useState(!1),[r,j]=c.useState(y),[m,C]=c.useState(!1),[b]=c.useState(!1),[g,l]=c.useState({open:!1,message:"",severity:"success"}),o=s=>{var v;const h=s.target,{name:d}=h,A=((v=s.target)==null?void 0:v.value)??h.value;d&&j(E=>({...E,[d]:Z(d,A)}))},B=s=>{var h,d;if(s.preventDefault(),!((h=r.tourId)!=null&&h.trim()))return l({open:!0,message:"Tour ID is required.",severity:"error"});if(!((d=r.userId)!=null&&d.trim()))return l({open:!0,message:"User ID is required.",severity:"error"});if(!r.date)return l({open:!0,message:"Date is required.",severity:"error"});console.log(m?"Updating booking:":"Creating booking:",r),n(!1),l({open:!0,message:m?"Booking updated.":"Booking created.",severity:"success"})},q=s=>{window.confirm("Are you sure you want to delete this booking?")&&(console.log("Delete booking:",s),l({open:!0,message:"Booking deleted.",severity:"success"}))},T=s=>({tourId:s.tourId,userId:s.userId,date:s.date,participants:s.participants,status:s.status,specialRequests:s.specialRequests??""}),w=s=>{j(T(s)),C(!0),n(!0)};return e.jsxs(D,{p:3,children:[e.jsxs(D,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsx("h2",{children:"Bookings Management"}),e.jsx(f,{variant:"contained",color:"primary",startIcon:e.jsx(H,{}),onClick:()=>{j(y),C(!1),n(!0)},children:"Add Booking"})]}),e.jsx(V,{component:P,children:e.jsxs(O,{children:[e.jsx(J,{children:e.jsxs(I,{children:[e.jsx(t,{children:"Tour ID"}),e.jsx(t,{children:"User ID"}),e.jsx(t,{children:"Date"}),e.jsx(t,{align:"right",children:"Participants"}),e.jsx(t,{children:"Status"}),e.jsx(t,{width:120,children:"Actions"})]})}),e.jsx(K,{children:a.length>0?a.map(s=>e.jsxs(I,{children:[e.jsx(t,{children:s.tourId}),e.jsx(t,{children:s.userId}),e.jsx(t,{children:s.date?new Date(s.date).toLocaleDateString():""}),e.jsx(t,{align:"right",children:s.participants}),e.jsx(t,{sx:{textTransform:"capitalize"},children:s.status}),e.jsxs(t,{children:[e.jsx(S,{onClick:()=>w(s),"aria-label":"edit",children:e.jsx(Q,{})}),e.jsx(S,{onClick:()=>s.id&&q(s.id),"aria-label":"delete",children:e.jsx(X,{color:"error"})})]})]},s.id)):e.jsx(I,{children:e.jsx(t,{colSpan:6,align:"center",children:"No bookings found"})})})]})}),e.jsx(R,{open:i,onClose:()=>n(!1),maxWidth:"md",fullWidth:!0,children:e.jsxs("form",{onSubmit:B,noValidate:!0,children:[e.jsx(W,{children:m?"Edit Booking":"Add New Booking"}),e.jsx(F,{children:e.jsxs(k,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(u,{xs:12,md:6,children:e.jsx(x,{fullWidth:!0,label:"Tour ID",name:"tourId",value:r.tourId||"",onChange:o,required:!0,margin:"normal"})}),e.jsx(u,{xs:12,md:6,children:e.jsx(x,{fullWidth:!0,label:"User ID",name:"userId",value:r.userId||"",onChange:o,required:!0,margin:"normal"})}),e.jsx(u,{xs:12,md:6,children:e.jsx(x,{fullWidth:!0,label:"Date",name:"date",type:"date",value:r.date||"",onChange:o,required:!0,margin:"normal",InputLabelProps:{shrink:!0}})}),e.jsx(u,{xs:12,md:6,children:e.jsx(x,{fullWidth:!0,label:"Participants",name:"participants",type:"number",value:r.participants??1,onChange:o,required:!0,margin:"normal",inputProps:{min:1}})}),e.jsx(u,{xs:12,md:6,children:e.jsxs(U,{fullWidth:!0,margin:"normal",children:[e.jsx(M,{id:"status-label",children:"Status"}),e.jsxs(G,{labelId:"status-label",name:"status",value:r.status||"pending",onChange:o,label:"Status",required:!0,children:[e.jsx(p,{value:"pending",children:"Pending"}),e.jsx(p,{value:"confirmed",children:"Confirmed"}),e.jsx(p,{value:"cancelled",children:"Cancelled"}),e.jsx(p,{value:"completed",children:"Completed"})]})]})}),e.jsx(u,{xs:12,children:e.jsx(x,{fullWidth:!0,label:"Special Requests",name:"specialRequests",value:r.specialRequests||"",onChange:o,multiline:!0,rows:4,margin:"normal"})})]})}),e.jsxs(L,{children:[e.jsx(f,{onClick:()=>n(!1),color:"inherit",children:"Cancel"}),e.jsxs(f,{type:"submit",variant:"contained",color:"primary",disabled:b,startIcon:b?e.jsx(N,{size:20}):void 0,children:[m?"Update":"Create"," Booking"]})]})]})}),e.jsx(Y,{open:g.open,autoHideDuration:6e3,onClose:()=>l(s=>({...s,open:!1})),children:e.jsx(z,{onClose:()=>l(s=>({...s,open:!1})),severity:g.severity,sx:{width:"100%"},children:g.message})})]})};export{re as default};
//# sourceMappingURL=BookingsManagement.B9fdhA4X.js.map
