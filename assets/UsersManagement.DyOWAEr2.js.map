{"version":3,"file":"UsersManagement.DyOWAEr2.js","sources":["../../node_modules/@mui/icons-material/esm/PersonAdd.js","../../node_modules/react-firebase-hooks/auth/dist/index.esm.js","../../src/hooks/useAuth.ts","../../src/pages/admin/components/UserFormDialog.tsx","../../src/pages/admin/components/UsersTable.tsx","../../src/pages/admin/UsersManagement.tsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4\"\n}), 'PersonAdd');","import { onAuthStateChanged, sendEmailVerification, createUserWithEmailAndPassword, sendPasswordResetEmail, sendSignInLinkToEmail, signInWithEmailAndPassword, signInWithEmailLink, FacebookAuthProvider, GithubAuthProvider, GoogleAuthProvider, TwitterAuthProvider, OAuthProvider, signInWithPopup, updateEmail, updatePassword, updateProfile, verifyBeforeUpdateEmail, onIdTokenChanged } from 'firebase/auth';\nimport { useMemo, useReducer, useCallback, useEffect, useState } from 'react';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar defaultState = function (defaultValue) {\r\n    return {\r\n        loading: defaultValue === undefined || defaultValue === null,\r\n        value: defaultValue,\r\n    };\r\n};\r\nvar reducer = function () { return function (state, action) {\r\n    switch (action.type) {\r\n        case 'error':\r\n            return __assign(__assign({}, state), { error: action.error, loading: false, value: undefined });\r\n        case 'reset':\r\n            return defaultState(action.defaultValue);\r\n        case 'value':\r\n            return __assign(__assign({}, state), { error: undefined, loading: false, value: action.value });\r\n        default:\r\n            return state;\r\n    }\r\n}; };\r\nvar useLoadingValue = (function (getDefaultValue) {\r\n    var defaultValue = getDefaultValue ? getDefaultValue() : undefined;\r\n    var _a = useReducer(reducer(), defaultState(defaultValue)), state = _a[0], dispatch = _a[1];\r\n    var reset = useCallback(function () {\r\n        var defaultValue = getDefaultValue ? getDefaultValue() : undefined;\r\n        dispatch({ type: 'reset', defaultValue: defaultValue });\r\n    }, [getDefaultValue]);\r\n    var setError = useCallback(function (error) {\r\n        dispatch({ type: 'error', error: error });\r\n    }, []);\r\n    var setValue = useCallback(function (value) {\r\n        dispatch({ type: 'value', value: value });\r\n    }, []);\r\n    return useMemo(function () { return ({\r\n        error: state.error,\r\n        loading: state.loading,\r\n        reset: reset,\r\n        setError: setError,\r\n        setValue: setValue,\r\n        value: state.value,\r\n    }); }, [state.error, state.loading, reset, setError, setValue, state.value]);\r\n});\n\nvar useAuthState = (function (auth, options) {\r\n    var _a = useLoadingValue(function () { return auth.currentUser; }), error = _a.error, loading = _a.loading, setError = _a.setError, setValue = _a.setValue, value = _a.value;\r\n    useEffect(function () {\r\n        var listener = onAuthStateChanged(auth, function (user) { return __awaiter(void 0, void 0, void 0, function () {\r\n            var e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(options === null || options === void 0 ? void 0 : options.onUserChanged)) return [3 /*break*/, 4];\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, options.onUserChanged(user)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        e_1 = _a.sent();\r\n                        setError(e_1);\r\n                        return [3 /*break*/, 4];\r\n                    case 4:\r\n                        setValue(user);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }, setError);\r\n        return function () {\r\n            listener();\r\n        };\r\n    }, [auth]);\r\n    return [value, loading, error];\r\n});\n\nvar useCreateUserWithEmailAndPassword = (function (auth, options) {\r\n    var _a = useState(), error = _a[0], setError = _a[1];\r\n    var _b = useState(), registeredUser = _b[0], setRegisteredUser = _b[1];\r\n    var _c = useState(false), loading = _c[0], setLoading = _c[1];\r\n    var createUserWithEmailAndPassword$1 = useCallback(function (email, password) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var user, error_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 5, 6, 7]);\r\n                    return [4 /*yield*/, createUserWithEmailAndPassword(auth, email, password)];\r\n                case 2:\r\n                    user = _a.sent();\r\n                    if (!(options && options.sendEmailVerification && user.user)) return [3 /*break*/, 4];\r\n                    return [4 /*yield*/, sendEmailVerification(user.user, options.emailVerificationOptions)];\r\n                case 3:\r\n                    _a.sent();\r\n                    _a.label = 4;\r\n                case 4:\r\n                    setRegisteredUser(user);\r\n                    return [2 /*return*/, user];\r\n                case 5:\r\n                    error_1 = _a.sent();\r\n                    setError(error_1);\r\n                    return [3 /*break*/, 7];\r\n                case 6:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth, options]);\r\n    return [createUserWithEmailAndPassword$1, registeredUser, loading, error];\r\n});\n\nvar useDeleteUser = (function (auth) {\r\n    var _a = useState(), error = _a[0], setError = _a[1];\r\n    var _b = useState(false), loading = _b[0], setLoading = _b[1];\r\n    var deleteUser = useCallback(function () { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 5, 6, 7]);\r\n                    if (!auth.currentUser) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, auth.currentUser.delete()];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3: throw new Error('No user is logged in');\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [2 /*return*/, false];\r\n                case 6:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [deleteUser, loading, error];\r\n});\n\nvar useSendEmailVerification = (function (auth) {\r\n    var _a = useState(), error = _a[0], setError = _a[1];\r\n    var _b = useState(false), loading = _b[0], setLoading = _b[1];\r\n    var sendEmailVerification$1 = useCallback(function () { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 5, 6, 7]);\r\n                    if (!auth.currentUser) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, sendEmailVerification(auth.currentUser)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3: throw new Error('No user is logged in');\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [2 /*return*/, false];\r\n                case 6:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [sendEmailVerification$1, loading, error];\r\n});\n\nvar useSendPasswordResetEmail = (function (auth) {\r\n    var _a = useState(), error = _a[0], setError = _a[1];\r\n    var _b = useState(false), loading = _b[0], setLoading = _b[1];\r\n    var sendPasswordResetEmail$1 = useCallback(function (email, actionCodeSettings) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 3, 4, 5]);\r\n                    return [4 /*yield*/, sendPasswordResetEmail(auth, email, actionCodeSettings)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [2 /*return*/, false];\r\n                case 4:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [sendPasswordResetEmail$1, loading, error];\r\n});\n\nvar useSendSignInLinkToEmail = (function (auth) {\r\n    var _a = useState(), error = _a[0], setError = _a[1];\r\n    var _b = useState(false), loading = _b[0], setLoading = _b[1];\r\n    var sendSignInLinkToEmail$1 = useCallback(function (email, actionCodeSettings) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 3, 4, 5]);\r\n                    return [4 /*yield*/, sendSignInLinkToEmail(auth, email, actionCodeSettings)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [2 /*return*/, false];\r\n                case 4:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [sendSignInLinkToEmail$1, loading, error];\r\n});\n\nvar useSignInWithEmailAndPassword = (function (auth) {\r\n    var _a = useState(), error = _a[0], setError = _a[1];\r\n    var _b = useState(), loggedInUser = _b[0], setLoggedInUser = _b[1];\r\n    var _c = useState(false), loading = _c[0], setLoading = _c[1];\r\n    var signInWithEmailAndPassword$1 = useCallback(function (email, password) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var user, err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 3, 4, 5]);\r\n                    return [4 /*yield*/, signInWithEmailAndPassword(auth, email, password)];\r\n                case 2:\r\n                    user = _a.sent();\r\n                    setLoggedInUser(user);\r\n                    return [2 /*return*/, user];\r\n                case 3:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [3 /*break*/, 5];\r\n                case 4:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [signInWithEmailAndPassword$1, loggedInUser, loading, error];\r\n});\n\nvar useSignInWithEmailLink = (function (auth) {\r\n    var _a = useState(), error = _a[0], setError = _a[1];\r\n    var _b = useState(), loggedInUser = _b[0], setLoggedInUser = _b[1];\r\n    var _c = useState(false), loading = _c[0], setLoading = _c[1];\r\n    var signInWithEmailLink$1 = useCallback(function (email, emailLink) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var user, err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 3, 4, 5]);\r\n                    return [4 /*yield*/, signInWithEmailLink(auth, email, emailLink)];\r\n                case 2:\r\n                    user = _a.sent();\r\n                    setLoggedInUser(user);\r\n                    return [2 /*return*/, user];\r\n                case 3:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [3 /*break*/, 5];\r\n                case 4:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [signInWithEmailLink$1, loggedInUser, loading, error];\r\n});\n\nvar useSignInWithApple = function (auth) {\r\n    return useSignInWithOAuth(auth, 'apple.com');\r\n};\r\nvar useSignInWithFacebook = function (auth) {\r\n    var createFacebookAuthProvider = useCallback(function (scopes, customOAuthParameters) {\r\n        var provider = new FacebookAuthProvider();\r\n        if (scopes) {\r\n            scopes.forEach(function (scope) { return provider.addScope(scope); });\r\n        }\r\n        if (customOAuthParameters) {\r\n            provider.setCustomParameters(customOAuthParameters);\r\n        }\r\n        return provider;\r\n    }, []);\r\n    return useSignInWithPopup(auth, createFacebookAuthProvider);\r\n};\r\nvar useSignInWithGithub = function (auth) {\r\n    var createGithubAuthProvider = useCallback(function (scopes, customOAuthParameters) {\r\n        var provider = new GithubAuthProvider();\r\n        if (scopes) {\r\n            scopes.forEach(function (scope) { return provider.addScope(scope); });\r\n        }\r\n        if (customOAuthParameters) {\r\n            provider.setCustomParameters(customOAuthParameters);\r\n        }\r\n        return provider;\r\n    }, []);\r\n    return useSignInWithPopup(auth, createGithubAuthProvider);\r\n};\r\nvar useSignInWithGoogle = function (auth) {\r\n    var createGoogleAuthProvider = useCallback(function (scopes, customOAuthParameters) {\r\n        var provider = new GoogleAuthProvider();\r\n        if (scopes) {\r\n            scopes.forEach(function (scope) { return provider.addScope(scope); });\r\n        }\r\n        if (customOAuthParameters) {\r\n            provider.setCustomParameters(customOAuthParameters);\r\n        }\r\n        return provider;\r\n    }, []);\r\n    return useSignInWithPopup(auth, createGoogleAuthProvider);\r\n};\r\nvar useSignInWithMicrosoft = function (auth) {\r\n    return useSignInWithOAuth(auth, 'microsoft.com');\r\n};\r\nvar useSignInWithTwitter = function (auth) {\r\n    var createTwitterAuthProvider = useCallback(function (scopes, customOAuthParameters) {\r\n        var provider = new TwitterAuthProvider();\r\n        if (scopes) {\r\n            scopes.forEach(function (scope) { return provider.addScope(scope); });\r\n        }\r\n        if (customOAuthParameters) {\r\n            provider.setCustomParameters(customOAuthParameters);\r\n        }\r\n        return provider;\r\n    }, []);\r\n    return useSignInWithPopup(auth, createTwitterAuthProvider);\r\n};\r\nvar useSignInWithYahoo = function (auth) {\r\n    return useSignInWithOAuth(auth, 'yahoo.com');\r\n};\r\nvar useSignInWithOAuth = function (auth, providerId) {\r\n    var createOAuthProvider = useCallback(function (scopes, customOAuthParameters) {\r\n        var provider = new OAuthProvider(providerId);\r\n        if (scopes) {\r\n            scopes.forEach(function (scope) { return provider.addScope(scope); });\r\n        }\r\n        if (customOAuthParameters) {\r\n            provider.setCustomParameters(customOAuthParameters);\r\n        }\r\n        return provider;\r\n    }, [providerId]);\r\n    return useSignInWithPopup(auth, createOAuthProvider);\r\n};\r\nvar useSignInWithPopup = function (auth, createProvider) {\r\n    var _a = useState(), error = _a[0], setError = _a[1];\r\n    var _b = useState(), loggedInUser = _b[0], setLoggedInUser = _b[1];\r\n    var _c = useState(false), loading = _c[0], setLoading = _c[1];\r\n    var doSignInWithPopup = useCallback(function (scopes, customOAuthParameters) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var provider, user, err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 3, 4, 5]);\r\n                    provider = createProvider(scopes, customOAuthParameters);\r\n                    return [4 /*yield*/, signInWithPopup(auth, provider)];\r\n                case 2:\r\n                    user = _a.sent();\r\n                    setLoggedInUser(user);\r\n                    return [2 /*return*/, user];\r\n                case 3:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [3 /*break*/, 5];\r\n                case 4:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth, createProvider]);\r\n    return [doSignInWithPopup, loggedInUser, loading, error];\r\n};\n\nvar useSignOut = (function (auth) {\r\n    var _a = useState(), error = _a[0], setError = _a[1];\r\n    var _b = useState(false), loading = _b[0], setLoading = _b[1];\r\n    var signOut = useCallback(function () { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 3, 4, 5]);\r\n                    return [4 /*yield*/, auth.signOut()];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [2 /*return*/, false];\r\n                case 4:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 5: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [signOut, loading, error];\r\n});\n\nvar useUpdateEmail = function (auth) {\r\n    var _a = useState(), error = _a[0], setError = _a[1];\r\n    var _b = useState(false), loading = _b[0], setLoading = _b[1];\r\n    var updateEmail$1 = useCallback(function (email) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_1;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 5, 6, 7]);\r\n                    if (!auth.currentUser) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, updateEmail(auth.currentUser, email)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3: throw new Error('No user is logged in');\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    err_1 = _a.sent();\r\n                    setError(err_1);\r\n                    return [2 /*return*/, false];\r\n                case 6:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [updateEmail$1, loading, error];\r\n};\r\nvar useUpdatePassword = function (auth) {\r\n    var _a = useState(), error = _a[0], setError = _a[1];\r\n    var _b = useState(false), loading = _b[0], setLoading = _b[1];\r\n    var updatePassword$1 = useCallback(function (password) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_2;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 5, 6, 7]);\r\n                    if (!auth.currentUser) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, updatePassword(auth.currentUser, password)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3: throw new Error('No user is logged in');\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    err_2 = _a.sent();\r\n                    setError(err_2);\r\n                    return [2 /*return*/, false];\r\n                case 6:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [updatePassword$1, loading, error];\r\n};\r\nvar useUpdateProfile = function (auth) {\r\n    var _a = useState(), error = _a[0], setError = _a[1];\r\n    var _b = useState(false), loading = _b[0], setLoading = _b[1];\r\n    var updateProfile$1 = useCallback(function (profile) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_3;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 5, 6, 7]);\r\n                    if (!auth.currentUser) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, updateProfile(auth.currentUser, profile)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3: throw new Error('No user is logged in');\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    err_3 = _a.sent();\r\n                    setError(err_3);\r\n                    return [2 /*return*/, false];\r\n                case 6:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [updateProfile$1, loading, error];\r\n};\r\nvar useVerifyBeforeUpdateEmail = function (auth) {\r\n    var _a = useState(), error = _a[0], setError = _a[1];\r\n    var _b = useState(false), loading = _b[0], setLoading = _b[1];\r\n    var verifyBeforeUpdateEmail$1 = useCallback(function (email, actionCodeSettings) { return __awaiter(void 0, void 0, void 0, function () {\r\n        var err_4;\r\n        return __generator(this, function (_a) {\r\n            switch (_a.label) {\r\n                case 0:\r\n                    setLoading(true);\r\n                    setError(undefined);\r\n                    _a.label = 1;\r\n                case 1:\r\n                    _a.trys.push([1, 5, 6, 7]);\r\n                    if (!auth.currentUser) return [3 /*break*/, 3];\r\n                    return [4 /*yield*/, verifyBeforeUpdateEmail(auth.currentUser, email, actionCodeSettings)];\r\n                case 2:\r\n                    _a.sent();\r\n                    return [2 /*return*/, true];\r\n                case 3: throw new Error('No user is logged in');\r\n                case 4: return [3 /*break*/, 7];\r\n                case 5:\r\n                    err_4 = _a.sent();\r\n                    setError(err_4);\r\n                    return [2 /*return*/, false];\r\n                case 6:\r\n                    setLoading(false);\r\n                    return [7 /*endfinally*/];\r\n                case 7: return [2 /*return*/];\r\n            }\r\n        });\r\n    }); }, [auth]);\r\n    return [verifyBeforeUpdateEmail$1, loading, error];\r\n};\n\nvar useIdToken = (function (auth, options) {\r\n    var _a = useLoadingValue(function () { return auth.currentUser; }), error = _a.error, loading = _a.loading, setError = _a.setError, setValue = _a.setValue, value = _a.value;\r\n    useEffect(function () {\r\n        var listener = onIdTokenChanged(auth, function (user) { return __awaiter(void 0, void 0, void 0, function () {\r\n            var e_1;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!(options === null || options === void 0 ? void 0 : options.onUserChanged)) return [3 /*break*/, 4];\r\n                        _a.label = 1;\r\n                    case 1:\r\n                        _a.trys.push([1, 3, , 4]);\r\n                        return [4 /*yield*/, options.onUserChanged(user)];\r\n                    case 2:\r\n                        _a.sent();\r\n                        return [3 /*break*/, 4];\r\n                    case 3:\r\n                        e_1 = _a.sent();\r\n                        setError(e_1);\r\n                        return [3 /*break*/, 4];\r\n                    case 4:\r\n                        setValue(user);\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        }); }, setError);\r\n        return function () {\r\n            listener();\r\n        };\r\n    }, [auth]);\r\n    return [value, loading, error];\r\n});\n\nexport { useAuthState, useCreateUserWithEmailAndPassword, useDeleteUser, useIdToken, useSendEmailVerification, useSendPasswordResetEmail, useSendSignInLinkToEmail, useSignInWithApple, useSignInWithEmailAndPassword, useSignInWithEmailLink, useSignInWithFacebook, useSignInWithGithub, useSignInWithGoogle, useSignInWithMicrosoft, useSignInWithTwitter, useSignInWithYahoo, useSignOut, useUpdateEmail, useUpdatePassword, useUpdateProfile, useVerifyBeforeUpdateEmail };\n","import { useAuthState } from 'react-firebase-hooks/auth';\r\nimport { auth } from '../firebase';\r\nimport AuthContext from '../contexts/AuthContext';\r\nimport { useContext } from 'react';\r\n\r\n// This hook provides authentication state and methods\r\n// It combines the context with any additional Firebase auth methods we need\r\nexport const useAuth = () => {\r\n  const context = useContext(AuthContext);\r\n  const [firebaseUser, firebaseLoading, firebaseError] = useAuthState(auth);\r\n\r\n  if (context === undefined) {\r\n    throw new Error('useAuth must be used within an AuthProvider');\r\n  }\r\n\r\n  return {\r\n    // From context\r\n    ...context,\r\n    // From firebase hooks\r\n    user: firebaseUser || context.currentUser,\r\n    loading: firebaseLoading || context.loading,\r\n    error: firebaseError,\r\n    // Convenience methods\r\n    isAuthenticated: !!firebaseUser || !!context.currentUser,\r\n    isAdmin: context.isAdmin,\r\n  };\r\n};\r\n\r\nexport default useAuth;\r\n","import React from 'react';\nimport {\n  Dialog, DialogTitle, DialogContent, DialogActions,\n  TextField, Button, FormControl, InputLabel,\n  Select, MenuItem, CircularProgress, Box\n} from '@mui/material';\nimport { SelectChangeEvent } from '@mui/material/Select';\n\nexport interface UserFormData {\n  id?: string;\n  firstName: string;\n  lastName: string;\n  email: string;\n  phone?: string;\n  role: 'user' | 'admin' | 'guide';\n  status: 'active' | 'inactive' | 'suspended';\n  password?: string;\n  confirmPassword?: string;\n  avatar?: string;\n  joinDate: string;\n  lastLogin?: string;\n}\n\ninterface UserFormDialogProps {\n  open: boolean;\n  onClose: () => void;\n  onSubmit: (userData: Omit<UserFormData, 'confirmPassword'>) => void;\n  formData: UserFormData;\n  onInputChange: (e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => void;\n  onRoleChange: (e: SelectChangeEvent<string>) => void;\n  onStatusChange: (e: SelectChangeEvent<string>) => void;\n  loading: boolean;\n  editMode: boolean;\n}\n\nexport const UserFormDialog: React.FC<UserFormDialogProps> = ({\n  open,\n  onClose,\n  onSubmit,\n  formData,\n  onInputChange,\n  onRoleChange,\n  onStatusChange,\n  loading,\n  editMode\n}) => {\n  const roleLabelId = 'user-role-label';\n  const statusLabelId = 'user-status-label';\n\n  return (\n    <Dialog\n      open={open}\n      onClose={loading ? undefined : onClose}\n      maxWidth=\"sm\"\n      fullWidth\n      aria-labelledby=\"user-form-dialog-title\"\n    >\n      <DialogTitle id=\"user-form-dialog-title\">\n        {editMode ? 'Edit User' : 'Add New User'}\n      </DialogTitle>\n\n      <DialogContent>\n        <Box mt={2}>\n          <Box display=\"flex\" gap={2}>\n            <TextField\n              fullWidth\n              label=\"First Name\"\n              name=\"firstName\"\n              value={formData.firstName}\n              onChange={onInputChange}\n              margin=\"normal\"\n              required\n              disabled={loading}\n              autoFocus\n            />\n            <TextField\n              fullWidth\n              label=\"Last Name\"\n              name=\"lastName\"\n              value={formData.lastName}\n              onChange={onInputChange}\n              margin=\"normal\"\n              required\n              disabled={loading}\n            />\n          </Box>\n\n          <TextField\n            fullWidth\n            label=\"Email\"\n            name=\"email\"\n            type=\"email\"\n            value={formData.email}\n            onChange={onInputChange}\n            margin=\"normal\"\n            required\n            disabled={editMode || loading}\n          />\n\n          <TextField\n            fullWidth\n            label=\"Phone\"\n            name=\"phone\"\n            value={formData.phone || ''}\n            onChange={onInputChange}\n            margin=\"normal\"\n            disabled={loading}\n          />\n\n          <FormControl fullWidth margin=\"normal\" disabled={loading}>\n            <InputLabel id={roleLabelId}>Role</InputLabel>\n            <Select\n              labelId={roleLabelId}\n              id=\"role\"\n              value={formData.role}\n              onChange={onRoleChange}\n              label=\"Role\"\n              required\n            >\n              <MenuItem value=\"user\">User</MenuItem>\n              <MenuItem value=\"admin\">Admin</MenuItem>\n              <MenuItem value=\"guide\">Guide</MenuItem>\n            </Select>\n          </FormControl>\n\n          <FormControl fullWidth margin=\"normal\" disabled={loading}>\n            <InputLabel id={statusLabelId}>Status</InputLabel>\n            <Select\n              labelId={statusLabelId}\n              id=\"status\"\n              value={formData.status}\n              onChange={onStatusChange}\n              label=\"Status\"\n              required\n            >\n              <MenuItem value=\"active\">Active</MenuItem>\n              <MenuItem value=\"inactive\">Inactive</MenuItem>\n              <MenuItem value=\"suspended\">Suspended</MenuItem>\n            </Select>\n          </FormControl>\n\n          {!editMode && (\n            <>\n              <TextField\n                fullWidth\n                label=\"Password\"\n                name=\"password\"\n                type=\"password\"\n                value={formData.password || ''}\n                onChange={onInputChange}\n                margin=\"normal\"\n                required\n                disabled={loading}\n              />\n              <TextField\n                fullWidth\n                label=\"Confirm Password\"\n                name=\"confirmPassword\"\n                type=\"password\"\n                value={formData.confirmPassword || ''}\n                onChange={onInputChange}\n                margin=\"normal\"\n                required\n                disabled={loading}\n                error={\n                  formData.password !== formData.confirmPassword &&\n                  !!formData.confirmPassword\n                }\n                helperText={\n                  formData.password !== formData.confirmPassword &&\n                  !!formData.confirmPassword\n                    ? 'Passwords do not match'\n                    : ''\n                }\n              />\n            </>\n          )}\n        </Box>\n      </DialogContent>\n\n      <DialogActions>\n        <Button onClick={onClose} disabled={loading}>\n          Cancel\n        </Button>\n        <Button\n          onClick={() => {\n            const { confirmPassword, ...submitData } = formData;\n            onSubmit(submitData);\n          }}\n          variant=\"contained\"\n          color=\"primary\"\n          disabled={\n            loading ||\n            !formData.firstName?.trim() ||\n            !formData.lastName?.trim() ||\n            !formData.email?.trim() ||\n            (!editMode && (!formData.password || formData.password !== formData.confirmPassword))\n          }\n        >\n          {loading ? <CircularProgress size={24} /> : 'Save'}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","import React from 'react';\nimport {\n  Paper, Table, TableBody, TableCell, TableContainer,\n  TableHead, TableRow, IconButton, Chip, Switch,\n  FormControlLabel, Typography, TablePagination, Box, Avatar\n} from '@mui/material';\nimport { Edit as EditIcon, Delete as DeleteIcon } from '@mui/icons-material';\nimport { User } from '../../../services/api';\n\n// Extend the User type to ensure it has an id property\ntype TableUser = User & { id: string };\n\ninterface UsersTableProps {\n  users: TableUser[];\n  loading: boolean;\n  pagination: {\n    page: number;\n    rowsPerPage: number;\n    count: number;\n  };\n  currentUserId?: string;\n  onPageChange: (event: unknown, newPage: number) => void;\n  onRowsPerPageChange: (event: React.ChangeEvent<HTMLInputElement>) => void;\n  onEdit: (user: TableUser) => void;\n  onDelete: (userId: string) => void;\n  onStatusToggle: (userId: string, currentStatus: User['status']) => void;\n  isAdmin: boolean;\n}\n\nexport const UsersTable: React.FC<UsersTableProps> = ({\n  users,\n  loading,\n  pagination,\n  currentUserId,\n  onPageChange,\n  onRowsPerPageChange,\n  onEdit,\n  onDelete,\n  onStatusToggle,\n  isAdmin\n}) => (\n  <Paper sx={{ width: '100%', overflow: 'hidden' }}>\n    <TableContainer>\n      <Table stickyHeader>\n        <TableHead>\n          <TableRow>\n            <TableCell>User</TableCell>\n            <TableCell>Email</TableCell>\n            <TableCell>Role</TableCell>\n            <TableCell>Status</TableCell>\n            <TableCell align=\"right\">Actions</TableCell>\n          </TableRow>\n        </TableHead>\n        <TableBody>\n          {users.length === 0 ? (\n            <TableRow>\n              <TableCell colSpan={5} align=\"center\" sx={{ py: 4 }}>\n                <Typography color=\"textSecondary\">\n                  {loading ? 'Loading users...' : 'No users found'}\n                </Typography>\n              </TableCell>\n            </TableRow>\n          ) : (\n            users.map((user) => (\n              <TableRow key={user.id} hover>\n                <TableCell>\n                  <Box display=\"flex\" alignItems=\"center\">\n                    <Avatar\n                      src={user.avatar}\n                      sx={{ width: 32, height: 32, mr: 1 }}\n                    >\n                      {user.name?.[0]}\n                    </Avatar>\n                    <Box>\n                      <Typography variant=\"body2\">\n                        {user.name}\n                      </Typography>\n                      <Typography variant=\"caption\" color=\"textSecondary\">\n                        {user.phone}\n                      </Typography>\n                    </Box>\n                  </Box>\n                </TableCell>\n                <TableCell>{user.email}</TableCell>\n                <TableCell>\n                  <Chip\n                    label={user.role}\n                    color={user.role === 'admin' ? 'primary' : 'default'}\n                    size=\"small\"\n                    variant=\"outlined\"\n                  />\n                </TableCell>\n                <TableCell>\n                  <FormControlLabel\n                    control={\n                      <Switch\n                        checked={user.status === 'active'}\n                        onChange={() => onStatusToggle(user.id, user.status)}\n                        color=\"primary\"\n                        disabled={!isAdmin || user.id === currentUserId}\n                      />\n                    }\n                    label={\n                      <Typography variant=\"body2\">\n                        {user.status === 'active' ? 'Active' : 'Inactive'}\n                      </Typography>\n                    }\n                  />\n                </TableCell>\n                <TableCell align=\"right\">\n                  <Box display=\"flex\" gap={1} justifyContent=\"flex-end\">\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => onEdit(user)}\n                      disabled={!isAdmin}\n                    >\n                      <EditIcon fontSize=\"small\" />\n                    </IconButton>\n                    <IconButton\n                      size=\"small\"\n                      onClick={() => onDelete(user.id)}\n                      disabled={!isAdmin || user.id === currentUserId}\n                      color=\"error\"\n                    >\n                      <DeleteIcon fontSize=\"small\" />\n                    </IconButton>\n                  </Box>\n                </TableCell>\n              </TableRow>\n            ))\n          )}\n        </TableBody>\n      </Table>\n    </TableContainer>\n    \n    <TablePagination\n      rowsPerPageOptions={[5, 10, 25]}\n      component=\"div\"\n      count={pagination.count}\n      rowsPerPage={pagination.rowsPerPage}\n      page={pagination.page}\n      onPageChange={onPageChange}\n      onRowsPerPageChange={onRowsPerPageChange}\n    />\n  </Paper>\n);\n","import React, { useState, useEffect, useCallback } from 'react';\nimport { Box, Button, Typography, Paper, Snackbar, Alert } from '@mui/material';\nimport { PersonAdd as PersonAddIcon } from '@mui/icons-material';\nimport { useAuth } from '../../hooks/useAuth';\nimport { userService, type User as ApiUser } from '../../services/api';\nimport type { AxiosError } from 'axios';\nimport { UserFormDialog } from './components/UserFormDialog';\nimport { UsersTable } from './components/UsersTable';\nimport type { UserFormData as UserFormDialogData } from './components/UserFormDialog';\n\n// Types\ntype User = ApiUser & { id: string };\n\nconst defaultFormData: UserFormDialogData = {\n  firstName: '',\n  lastName: '',\n  email: '',\n  phone: '',\n  role: 'user',\n  status: 'active',\n  password: '',\n  confirmPassword: '',\n  joinDate: new Date().toISOString(),\n};\n\nconst UsersManagement: React.FC = () => {\n  const { user: currentUser, isAdmin } = useAuth();\n\n  // State management\n  const [users, setUsers] = useState<User[]>([]); // visible page slice\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const [openDialog, setOpenDialog] = useState<boolean>(false);\n  const [editMode, setEditMode] = useState<boolean>(false);\n\n  const [pagination, setPagination] = useState<{ page: number; rowsPerPage: number; count: number }>({\n    page: 0,\n    rowsPerPage: 10,\n    count: 0,\n  });\n\n  const [formData, setFormData] = useState<UserFormDialogData>(defaultFormData);\n\n  const [snackbar, setSnackbar] = useState<{\n    open: boolean;\n    message: string;\n    severity: 'success' | 'error' | 'info' | 'warning';\n  }>({\n    open: false,\n    message: '',\n    severity: 'success',\n  });\n\n  const showSnackbar = useCallback(\n    (message: string, severity: 'success' | 'error' | 'info' | 'warning' = 'success') => {\n      setSnackbar({ open: true, message, severity });\n    },\n    []\n  );\n\n  // Fetch users (client-side pagination to match userService signature)\n  const fetchUsers = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // your userService.getAllUsers accepts 0â€“1 arguments and returns User[]\n      const all = await userService.getAllUsers();\n\n      // Ensure each user has an id (fallback to _id)\n      const allWithId: User[] = (all || []).map((u: any) => ({\n        ...u,\n        id: u.id || u._id || '',\n      }));\n\n      const start = pagination.page * pagination.rowsPerPage;\n      const end = start + pagination.rowsPerPage;\n\n      setUsers(allWithId.slice(start, end));\n      setPagination((prev) => ({ ...prev, count: allWithId.length }));\n    } catch (err) {\n      const ax = err as AxiosError<{ message?: string }>;\n      const msg = ax.response?.data?.message || 'Failed to fetch users';\n      setError(msg);\n      showSnackbar(msg, 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [pagination.page, pagination.rowsPerPage, showSnackbar]);\n\n  // Create / Update user\n  const handleSaveUser = async (fd: UserFormDialogData) => {\n    try {\n      setLoading(true);\n\n      if (editMode && selectedUser) {\n        // Update existing\n        const { password, confirmPassword, firstName, lastName, ...rest } = fd;\n        const updateData: Partial<ApiUser> = {\n          ...rest,\n          name: `${firstName} ${lastName}`.trim(),\n        };\n        await userService.updateUser(selectedUser.id, updateData);\n        showSnackbar('User updated successfully');\n      } else {\n        // Create new (password required)\n        if (!fd.password) throw new Error('Password is required for new users');\n        const { confirmPassword, firstName, lastName, ...rest } = fd;\n        await userService.createUser({\n          ...rest,\n          name: `${firstName} ${lastName}`.trim(),\n          password: fd.password,\n        });\n        showSnackbar('User created successfully');\n      }\n\n      setOpenDialog(false);\n      await fetchUsers();\n    } catch (err) {\n      const ax = err as AxiosError<{ message?: string }>;\n      showSnackbar(ax.response?.data?.message || 'Failed to save user', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Toggle status (active <-> inactive) via updateUser (no updateUserStatus in userService)\n  const handleStatusToggle = async (userId: string, currentStatus: User['status']) => {\n    try {\n      setLoading(true);\n      const newStatus: User['status'] = currentStatus === 'active' ? 'inactive' : 'active';\n\n      await userService.updateUser(userId, { status: newStatus } as Partial<ApiUser>);\n\n      setUsers((prev) => prev.map((u) => (u.id === userId ? { ...u, status: newStatus } : u)));\n      showSnackbar(`User status updated to ${newStatus}`);\n    } catch (err) {\n      const ax = err as AxiosError<{ message?: string }>;\n      showSnackbar(ax.response?.data?.message || 'Failed to update user status', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Delete user (prevent self-delete)\n  const handleDeleteUser = async (userId: string) => {\n    try {\n      const selfId = (currentUser as any)?.id || (currentUser as any)?.uid;\n      if (selfId && userId === selfId) {\n        showSnackbar(\"You can't delete your own account while logged in.\", 'warning');\n        return;\n      }\n\n      setLoading(true);\n      await userService.deleteUser(userId);\n      showSnackbar('User deleted successfully');\n      await fetchUsers();\n    } catch (err) {\n      const ax = err as AxiosError<{ message?: string }>;\n      showSnackbar(ax.response?.data?.message || 'Failed to delete user', 'error');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Pagination handlers\n  const handlePageChange = (_event: unknown, newPage: number) => {\n    setPagination((prev) => ({ ...prev, page: newPage }));\n  };\n\n  const handleRowsPerPageChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const rows = parseInt(event.target.value, 10);\n    setPagination((prev) => ({ ...prev, rowsPerPage: rows, page: 0 }));\n  };\n\n  // When editing, hydrate the form from the selected user\n  useEffect(() => {\n    if (editMode && selectedUser) {\n      const nameParts = selectedUser.name ? selectedUser.name.split(' ') : ['', ''];\n      const firstName = nameParts[0] || '';\n      const lastName = nameParts.slice(1).join(' ') || '';\n\n      setFormData({\n        firstName,\n        lastName,\n        email: selectedUser.email || '',\n        phone: (selectedUser as any).phone || '',\n        role: selectedUser.role || 'user',\n        status: (selectedUser.status as any) || 'active',\n        joinDate: (selectedUser as any).joinDate || new Date().toISOString(),\n        password: '',\n        confirmPassword: '',\n      });\n    } else {\n      setFormData(defaultFormData);\n    }\n  }, [editMode, selectedUser]);\n\n  // Kick off initial fetch and whenever page/rows change\n  useEffect(() => {\n    fetchUsers();\n  }, [fetchUsers]);\n\n  // Handlers to open dialog in edit mode\n  const handleEditUser = (user: User) => {\n    setSelectedUser(user);\n    setEditMode(true);\n    setOpenDialog(true);\n  };\n\n  return (\n    <Paper sx={{ p: 3 }}>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 3 }}>\n        <Typography variant=\"h5\">Users Management</Typography>\n        {isAdmin && (\n          <Button\n            variant=\"contained\"\n            startIcon={<PersonAddIcon />}\n            onClick={() => {\n              setSelectedUser(null);\n              setEditMode(false);\n              setOpenDialog(true);\n            }}\n            disabled={loading}\n          >\n            Add User\n          </Button>\n        )}\n      </Box>\n\n      {error && (\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\n          {error}\n        </Alert>\n      )}\n\n      <UsersTable\n        users={users}\n        loading={loading}\n        pagination={pagination}\n        currentUserId={(currentUser as any)?.id || (currentUser as any)?.uid || ''}\n        onPageChange={handlePageChange}\n        onRowsPerPageChange={handleRowsPerPageChange}\n        onEdit={handleEditUser}\n        onDelete={handleDeleteUser}\n        onStatusToggle={handleStatusToggle}\n        isAdmin={!!isAdmin}\n      />\n\n      <UserFormDialog\n        open={openDialog}\n        onClose={() => setOpenDialog(false)}\n        onSubmit={handleSaveUser}\n        formData={formData}\n        loading={loading}\n        editMode={editMode}\n        onInputChange={(e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement>) => {\n          const { name, value } = e.target;\n          setFormData((prev) => ({ ...prev, [name]: value }));\n        }}\n        onRoleChange={(e: any) => {\n          setFormData((prev) => ({\n            ...prev,\n            role: (e.target?.value || 'user') as 'user' | 'admin' | 'guide',\n          }));\n        }}\n        onStatusChange={(e: any) => {\n          setFormData((prev) => ({\n            ...prev,\n            status: (e.target?.value || 'active') as 'active' | 'inactive' | 'suspended',\n          }));\n        }}\n      />\n\n      <Snackbar\n        open={snackbar.open}\n        autoHideDuration={6000}\n        onClose={() => setSnackbar((prev) => ({ ...prev, open: false }))}\n      >\n        <Alert severity={snackbar.severity} onClose={() => setSnackbar((prev) => ({ ...prev, open: false }))}>\n          {snackbar.message}\n        </Alert>\n      </Snackbar>\n    </Paper>\n  );\n};\n\nexport default UsersManagement;\n\n"],"names":["PersonAddIcon","createSvgIcon","_jsx","__awaiter","thisArg","_arguments","P","generator","adopt","value","resolve","reject","fulfilled","step","e","rejected","result","__generator","body","_","t","f","y","g","verb","v","op","__assign","s","i","n","p","defaultState","defaultValue","reducer","state","action","useLoadingValue","getDefaultValue","_a","useReducer","dispatch","reset","useCallback","setError","error","setValue","useMemo","useAuthState","auth","options","loading","useEffect","listener","onAuthStateChanged","user","e_1","useAuth","context","useContext","AuthContext","firebaseUser","firebaseLoading","firebaseError","UserFormDialog","open","onClose","onSubmit","formData","onInputChange","onRoleChange","onStatusChange","editMode","roleLabelId","statusLabelId","jsxs","Dialog","jsx","DialogTitle","DialogContent","Box","TextField","FormControl","InputLabel","Select","MenuItem","Fragment","DialogActions","Button","confirmPassword","submitData","_b","_c","CircularProgress","UsersTable","users","pagination","currentUserId","onPageChange","onRowsPerPageChange","onEdit","onDelete","onStatusToggle","isAdmin","Paper","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","Typography","Avatar","Chip","FormControlLabel","Switch","IconButton","EditIcon","DeleteIcon","TablePagination","defaultFormData","UsersManagement","currentUser","setUsers","useState","setLoading","selectedUser","setSelectedUser","openDialog","setOpenDialog","setEditMode","setPagination","setFormData","snackbar","setSnackbar","showSnackbar","message","severity","fetchUsers","allWithId","userService","u","start","end","prev","err","msg","handleSaveUser","fd","password","firstName","lastName","rest","updateData","handleStatusToggle","userId","currentStatus","newStatus","handleDeleteUser","selfId","handlePageChange","_event","newPage","handleRowsPerPageChange","event","rows","nameParts","handleEditUser","Alert","name","Snackbar"],"mappings":"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","x_google_ignoreList":[0,1]}