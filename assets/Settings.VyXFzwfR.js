import{l as F,j as e,r as x,k as N,B as I,T as G,A as D,b as B,a0 as O,a1 as p,a2 as Q,a3 as Z,G as c,e as u,F as f,f as y,S as C,M as l,g as w,v as Y,a4 as $,a as ee}from"./index.BZ6bSIPx.js";import{S as ae}from"./Snackbar.DN_5azCV.js";const te=F(e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"}),"Language"),le=F(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1z"}),"Lock"),ie=F(e.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications"),ne=F(e.jsx("path",{d:"M18 17H6v-2h12zm0-4H6v-2h12zm0-4H6V7h12zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2z"}),"Receipt"),S=({children:h,value:A,index:g,...E})=>e.jsx("div",{role:"tabpanel",hidden:A!==g,id:`settings-tabpanel-${g}`,"aria-labelledby":`settings-tab-${g}`,...E,children:A===g&&e.jsx(I,{sx:{p:3},children:h})}),T=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,oe=()=>{const[h,A]=x.useState("general"),[g,E]=x.useState(!0),[k,H]=x.useState(!1),[X,L]=x.useState(""),[z,U]=x.useState({open:!1,message:"",severity:"success"}),[a,j]=x.useState({siteTitle:"28° West",siteDescription:"Adventure Tours & Travel",contactEmail:"info@28degreeswest.com",contactPhone:"",address:"",socialMedia:{facebook:"",twitter:"",instagram:"",linkedin:"",youtube:""},seo:{metaTitle:"",metaDescription:"",metaKeywords:""},maintenanceMode:!1,allowRegistrations:!0,defaultUserRole:"user",currency:"USD",timezone:"UTC",dateFormat:"MM/DD/YYYY",timeFormat:"12h",itemsPerPage:10,enableAnalytics:!1,googleAnalyticsId:"",enableEmailNotifications:!0,emailSender:"noreply@28degreeswest.com"}),v=(t,i="success")=>U({open:!0,message:t,severity:i}),W=x.useCallback((t,i,s)=>{j(n=>({...n,[t]:{...n[t],[i]:s}}))},[]),R=x.useCallback(async()=>{var t,i,s,n,r;E(!0),L("");try{const o=await N.get("/api/v1/admin/settings"),d=o.data.data??o.data;j(M=>({...M,...d}))}catch(o){if(((t=o==null?void 0:o.response)==null?void 0:t.status)===404)try{const d=await N.get("/api/v1/settings"),M=d.data.data??d.data;j(q=>({...q,...M}))}catch(d){L(((s=(i=d==null?void 0:d.response)==null?void 0:i.data)==null?void 0:s.message)||"Failed to load settings"),v("Failed to load settings","error")}else L(((r=(n=o==null?void 0:o.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to load settings"),v("Failed to load settings","error")}finally{E(!1)}},[]);x.useEffect(()=>{R()},[R]);const V=(t,i)=>A(i),m=t=>{const i=t.target,{name:s,value:n,type:r,checked:o}=i;if(s.includes(".")){const[d,M]=s.split(".");W(d,M,r==="checkbox"?o:n)}else j(d=>({...d,[s]:r==="checkbox"?o:n}))},b=t=>{const{name:i,value:s}=t.target;if(i){if(i.includes(".")){const[n,r]=i.split(".");W(n,r,s);return}j(n=>({...n,[i]:i==="itemsPerPage"?Number(s):s}))}},P=t=>(i,s)=>{if(t.includes(".")){const[n,r]=t.split(".");W(n,r,s)}else j(n=>({...n,[t]:s}))},J=()=>a.siteTitle.trim()?T.test(a.contactEmail)?a.enableAnalytics&&!a.googleAnalyticsId.trim()?"Google Analytics is enabled—please provide a Tracking ID.":a.enableEmailNotifications&&!T.test(a.emailSender)?"Please provide a valid email sender address.":!Number.isFinite(a.itemsPerPage)||a.itemsPerPage<1?"Items per page must be at least 1.":null:"Please provide a valid contact email.":"Site title is required.",_=async t=>{var s,n;t.preventDefault();const i=J();if(i){v(i,"error");return}H(!0);try{const r=await N.put("/api/v1/admin/settings",a);r.status>=200&&r.status<300?(v("Settings saved successfully","success"),await R()):v("Failed to save settings","error")}catch(r){const o=((n=(s=r==null?void 0:r.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to save settings";v(o,"error")}finally{H(!1)}},K=()=>g?e.jsx(I,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"300px",children:e.jsx(B,{})}):e.jsxs("form",{onSubmit:_,children:[e.jsxs(O,{value:h,onChange:V,"aria-label":"settings tabs",variant:"scrollable",scrollButtons:"auto",sx:{mb:3},children:[e.jsx(p,{icon:e.jsx(Q,{}),label:"General",value:"general"}),e.jsx(p,{icon:e.jsx(te,{}),label:"Appearance",value:"appearance"}),e.jsx(p,{icon:e.jsx(Z,{}),label:"Email",value:"email"}),e.jsx(p,{icon:e.jsx(le,{}),label:"Security",value:"security"}),e.jsx(p,{icon:e.jsx(ie,{}),label:"Notifications",value:"notifications"}),e.jsx(p,{icon:e.jsx(ne,{}),label:"Billing",value:"billing"})]}),e.jsx(S,{value:h,index:"general",children:e.jsxs(c,{container:!0,spacing:3,children:[e.jsxs(c,{item:!0,xs:12,md:6,children:[e.jsx(u,{fullWidth:!0,label:"Site Title",name:"siteTitle",value:a.siteTitle,onChange:m,margin:"normal",variant:"outlined",required:!0}),e.jsx(u,{fullWidth:!0,multiline:!0,rows:3,label:"Site Description",name:"siteDescription",value:a.siteDescription,onChange:m,margin:"normal",variant:"outlined"}),e.jsx(u,{fullWidth:!0,label:"Contact Email",name:"contactEmail",type:"email",value:a.contactEmail,onChange:m,margin:"normal",variant:"outlined",required:!0,error:!!a.contactEmail&&!T.test(a.contactEmail),helperText:a.contactEmail&&!T.test(a.contactEmail)?"Invalid email address":" "}),e.jsx(u,{fullWidth:!0,label:"Contact Phone",name:"contactPhone",value:a.contactPhone,onChange:m,margin:"normal",variant:"outlined"}),e.jsx(u,{fullWidth:!0,label:"Address",name:"address",value:a.address,onChange:m,margin:"normal",variant:"outlined"})]}),e.jsxs(c,{item:!0,xs:12,md:6,children:[e.jsxs(f,{fullWidth:!0,margin:"normal",children:[e.jsx(y,{id:"currency-label",children:"Currency"}),e.jsxs(C,{labelId:"currency-label",id:"currency",name:"currency",value:a.currency,onChange:b,label:"Currency",children:[e.jsx(l,{value:"USD",children:"USD ($)"}),e.jsx(l,{value:"EUR",children:"EUR (€)"}),e.jsx(l,{value:"GBP",children:"GBP (£)"}),e.jsx(l,{value:"CAD",children:"CAD (C$)"}),e.jsx(l,{value:"AUD",children:"AUD (A$)"}),e.jsx(l,{value:"JMD",children:"JMD (J$)"})]})]}),e.jsxs(f,{fullWidth:!0,margin:"normal",children:[e.jsx(y,{id:"timezone-label",children:"Timezone"}),e.jsxs(C,{labelId:"timezone-label",id:"timezone",name:"timezone",value:a.timezone,onChange:b,label:"Timezone",children:[e.jsx(l,{value:"UTC",children:"UTC"}),e.jsx(l,{value:"America/New_York",children:"Eastern Time (ET)"}),e.jsx(l,{value:"America/Chicago",children:"Central Time (CT)"}),e.jsx(l,{value:"America/Denver",children:"Mountain Time (MT)"}),e.jsx(l,{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),e.jsx(l,{value:"America/Jamaica",children:"America/Jamaica"})]})]}),e.jsx(w,{control:e.jsx(Y,{checked:a.maintenanceMode,onChange:P("maintenanceMode"),name:"maintenanceMode",color:"primary"}),label:"Maintenance Mode",sx:{mt:2,display:"block"}}),e.jsx($,{children:"When enabled, only administrators can access the site."}),e.jsx(w,{control:e.jsx(Y,{checked:a.allowRegistrations,onChange:P("allowRegistrations"),name:"allowRegistrations",color:"primary"}),label:"Allow New User Registrations",sx:{mt:2,display:"block"}})]}),e.jsxs(c,{item:!0,xs:12,children:[e.jsx(G,{variant:"subtitle1",sx:{mt:2},children:"Social Media"}),e.jsx(c,{container:!0,spacing:2,children:["facebook","twitter","instagram","linkedin","youtube"].map(t=>e.jsx(c,{item:!0,xs:12,md:6,children:e.jsx(u,{fullWidth:!0,label:t[0].toUpperCase()+t.slice(1),name:`socialMedia.${t}`,value:a.socialMedia[t]||"",onChange:m,margin:"normal",variant:"outlined"})},t))})]})]})}),e.jsx(S,{value:h,index:"appearance",children:e.jsxs(c,{container:!0,spacing:3,children:[e.jsxs(c,{item:!0,xs:12,md:6,children:[e.jsxs(f,{fullWidth:!0,margin:"normal",children:[e.jsx(y,{id:"date-format-label",children:"Date Format"}),e.jsxs(C,{labelId:"date-format-label",id:"dateFormat",name:"dateFormat",value:a.dateFormat,onChange:b,label:"Date Format",children:[e.jsx(l,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx(l,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx(l,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),e.jsxs(f,{fullWidth:!0,margin:"normal",children:[e.jsx(y,{id:"time-format-label",children:"Time Format"}),e.jsxs(C,{labelId:"time-format-label",id:"timeFormat",name:"timeFormat",value:a.timeFormat,onChange:b,label:"Time Format",children:[e.jsx(l,{value:"12h",children:"12-hour (2:30 PM)"}),e.jsx(l,{value:"24h",children:"24-hour (14:30)"})]})]}),e.jsxs(f,{fullWidth:!0,margin:"normal",children:[e.jsx(y,{id:"items-per-page-label",children:"Items Per Page"}),e.jsxs(C,{labelId:"items-per-page-label",id:"itemsPerPage",name:"itemsPerPage",value:String(a.itemsPerPage),onChange:b,label:"Items Per Page",children:[e.jsx(l,{value:"5",children:"5"}),e.jsx(l,{value:"10",children:"10"}),e.jsx(l,{value:"25",children:"25"}),e.jsx(l,{value:"50",children:"50"}),e.jsx(l,{value:"100",children:"100"})]})]})]}),e.jsxs(c,{item:!0,xs:12,md:6,children:[e.jsx(G,{variant:"subtitle1",children:"SEO"}),e.jsx(u,{fullWidth:!0,label:"Meta Title",name:"seo.metaTitle",value:a.seo.metaTitle,onChange:m,margin:"normal",variant:"outlined"}),e.jsx(u,{fullWidth:!0,multiline:!0,rows:3,label:"Meta Description",name:"seo.metaDescription",value:a.seo.metaDescription,onChange:m,margin:"normal",variant:"outlined"}),e.jsx(u,{fullWidth:!0,label:"Meta Keywords (comma separated)",name:"seo.metaKeywords",value:a.seo.metaKeywords,onChange:m,margin:"normal",variant:"outlined"})]})]})}),e.jsx(S,{value:h,index:"email",children:e.jsx(c,{container:!0,spacing:3,children:e.jsxs(c,{item:!0,xs:12,md:6,children:[e.jsx(w,{control:e.jsx(Y,{checked:a.enableEmailNotifications,onChange:P("enableEmailNotifications"),name:"enableEmailNotifications",color:"primary"}),label:"Enable Email Notifications",sx:{mb:2,display:"block"}}),e.jsx(u,{fullWidth:!0,label:"Email Sender Address",name:"emailSender",type:"email",value:a.emailSender,onChange:m,margin:"normal",variant:"outlined",error:!!a.emailSender&&!T.test(a.emailSender),helperText:a.emailSender&&!T.test(a.emailSender)?"Invalid email address":"This email will be used as the From address for system emails."})]})})}),e.jsx(S,{value:h,index:"security",children:e.jsx(c,{container:!0,spacing:3,children:e.jsxs(c,{item:!0,xs:12,md:6,children:[e.jsxs(f,{fullWidth:!0,margin:"normal",children:[e.jsx(y,{id:"default-role-label",children:"Default User Role"}),e.jsxs(C,{labelId:"default-role-label",id:"defaultUserRole",name:"defaultUserRole",value:a.defaultUserRole,onChange:b,label:"Default User Role",children:[e.jsx(l,{value:"user",children:"User"}),e.jsx(l,{value:"guide",children:"Guide"}),e.jsx(l,{value:"admin",children:"Administrator"})]}),e.jsx($,{children:"This role is assigned to new users when they register."})]}),e.jsx(w,{control:e.jsx(Y,{checked:a.enableAnalytics,onChange:P("enableAnalytics"),name:"enableAnalytics",color:"primary"}),label:"Enable Google Analytics",sx:{mt:2,display:"block"}}),e.jsx(u,{fullWidth:!0,label:"Google Analytics ID",name:"googleAnalyticsId",value:a.googleAnalyticsId,onChange:m,margin:"normal",variant:"outlined",disabled:!a.enableAnalytics,helperText:"Enter your GA4 Tracking ID (e.g., G-XXXXXXXXXX)"})]})})}),e.jsx(S,{value:h,index:"notifications",children:e.jsx(D,{severity:"info",children:"Granular notification preferences can be managed here."})}),e.jsx(S,{value:h,index:"billing",children:e.jsx(D,{severity:"info",children:"Billing & payment related settings can be managed here."})}),e.jsx(I,{sx:{mt:4,display:"flex",justifyContent:"flex-end"},children:e.jsx(ee,{type:"submit",variant:"contained",color:"primary",size:"large",disabled:k,startIcon:k?e.jsx(B,{size:20}):null,children:k?"Saving...":"Save Changes"})})]});return e.jsxs(I,{children:[e.jsx(G,{variant:"h4",gutterBottom:!0,children:"Settings"}),X?e.jsx(D,{severity:"error",sx:{mb:3},children:X}):e.jsx(D,{severity:"info",sx:{mb:3},children:"Configure your website settings and preferences here."}),K(),e.jsx(ae,{open:z.open,autoHideDuration:6e3,onClose:()=>U(t=>({...t,open:!1})),anchorOrigin:{vertical:"top",horizontal:"right"},children:e.jsx(D,{onClose:()=>U(t=>({...t,open:!1})),severity:z.severity,sx:{width:"100%"},children:z.message})})]})};export{oe as default};
//# sourceMappingURL=Settings.VyXFzwfR.js.map
