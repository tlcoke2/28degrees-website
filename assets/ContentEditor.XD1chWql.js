import{k as b,r as u,j as e,C,B as W,b as S,$ as T,T as g,a as H,A,P as w,G as l,e as d}from"./index.BZ6bSIPx.js";function f(){if(typeof window>"u")return{};const r=localStorage.getItem("adminToken");return r?{Authorization:`Bearer ${r}`}:{}}async function I(r){var i;const s=`/content/${encodeURIComponent(r)}`,n=await b.get(s);return((i=n==null?void 0:n.data)==null?void 0:i.data)??(n==null?void 0:n.data)??{}}async function E(r){var o;const s=f();if(!("Authorization"in s))throw new Error("Admin authentication required. Please log in to the admin panel.");const n=`/content/${encodeURIComponent(r)}/admin`,i=await b.get(n,{headers:s});return((o=i==null?void 0:i.data)==null?void 0:o.data)??(i==null?void 0:i.data)??{}}async function R(r,s){var c;const n=f();if(!("Authorization"in n))throw new Error("Admin authentication required. Please log in to the admin panel.");const i=`/content/${encodeURIComponent(r)}/admin`,o=await b.put(i,s,{headers:n});return((c=o==null?void 0:o.data)==null?void 0:c.data)??(o==null?void 0:o.data)??{}}async function B(r){try{if("Authorization"in f())return await E(r)}catch{}return I(r)}const m={getPublic:I,getAdmin:E,updateAdmin:R,getEditable:B},z=()=>{const[r,s]=u.useState({}),[n,i]=u.useState({}),[o,c]=u.useState(!0),[x,j]=u.useState(!1),[p,h]=u.useState(""),[v,y]=u.useState("");u.useEffect(()=>{let t=!0;return(async()=>{try{c(!0),h("");const[a,U]=await Promise.all([m.getEditable("home"),m.getEditable("about")]);if(!t)return;s(a||{}),i(U||{})}catch(a){h((a==null?void 0:a.message)||"Failed to load content")}finally{t&&c(!1)}})(),()=>{t=!1}},[]);const P=async()=>{try{j(!0),h(""),y(""),await m.updateAdmin("home",r),await m.updateAdmin("about",n),y("Content saved successfully.")}catch(t){h((t==null?void 0:t.message)||"Failed to save content.")}finally{j(!1)}};return o?e.jsx(C,{maxWidth:"lg",sx:{py:6},children:e.jsx(W,{display:"flex",alignItems:"center",justifyContent:"center",minHeight:240,children:e.jsx(S,{})})}):e.jsxs(C,{maxWidth:"lg",sx:{py:4},children:[e.jsxs(T,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[e.jsx(g,{variant:"h4",children:"Content Editor"}),e.jsx(H,{variant:"contained",onClick:P,disabled:x,startIcon:x?e.jsx(S,{size:18}):void 0,children:x?"Savingâ€¦":"Save All"})]}),p&&e.jsx(A,{severity:"error",sx:{mb:2},children:p}),v&&e.jsx(A,{severity:"success",sx:{mb:2},children:v}),e.jsxs(w,{sx:{p:3,mb:4},children:[e.jsx(g,{variant:"h6",sx:{mb:2},children:"Home Page"}),e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,label:"Hero Title",value:r.heroTitle||"",onChange:t=>s(a=>({...a,heroTitle:t.target.value}))})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,label:"Hero Subtitle",value:r.heroSubtitle||"",onChange:t=>s(a=>({...a,heroSubtitle:t.target.value}))})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,label:"Hero Image URL",value:r.heroImageUrl||"",onChange:t=>s(a=>({...a,heroImageUrl:t.target.value}))})})]})]}),e.jsxs(w,{sx:{p:3},children:[e.jsx(g,{variant:"h6",sx:{mb:2},children:"About Page"}),e.jsxs(l,{container:!0,spacing:2,children:[e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,label:"Title",value:n.title||"",onChange:t=>i(a=>({...a,title:t.target.value}))})}),e.jsx(l,{item:!0,xs:12,md:6,children:e.jsx(d,{fullWidth:!0,label:"Subtitle",value:n.subtitle||"",onChange:t=>i(a=>({...a,subtitle:t.target.value}))})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,label:"Banner Image URL",value:n.bannerImageUrl||"",onChange:t=>i(a=>({...a,bannerImageUrl:t.target.value}))})}),e.jsx(l,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,multiline:!0,minRows:6,label:"Body",value:n.body||"",onChange:t=>i(a=>({...a,body:t.target.value}))})})]})]})]})};export{z as default};
//# sourceMappingURL=ContentEditor.XD1chWql.js.map
